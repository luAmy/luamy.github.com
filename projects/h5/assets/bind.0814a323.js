import{y as C,G as _,H as g,r as p,o as y,c as x,b as V,a,J as n,w as i,M as f,N as w,O as l}from"./vendor.8a3e6c17.js";import{_ as I}from"./index.fed18ae1.js";const k={class:"bind-wrap"},N={class:"bind-panel"},B=f("\u786E\u5B9A\u7ED1\u5B9A"),T={setup(z){C();let s=_(!1),d=_("\u53D1\u9001\u9A8C\u8BC1\u7801"),e=g({phone:"",phoneCode:"",userId:localStorage.userId});function m(){e.phoneCode.length>4&&(e.phoneCode=e.phoneCode.slice(0,4))}function h(){if(!e.phone){l.fail("\u8BF7\u8F93\u5165\u624B\u673A\u53F7");return}s.value||verificationCode({phone:e.phone}).then(t=>{let o=60;l.success("\u5DF2\u53D1\u9001\u9A8C\u8BC1\u7801"),s.value=!0;let r=setInterval(()=>{if(!o){d.value="\u53D1\u9001\u9A8C\u8BC1\u7801",s.value=!1,clearInterval(r);return}d.value=`\u91CD\u65B0\u53D1\u9001(${--o}s)`},1e3)})}function v(){if(!e.phone){l.fail("\u8BF7\u8F93\u5165\u624B\u673A\u53F7");return}if(!e.phoneCode){l.fail("\u8BF7\u8F93\u5165\u77ED\u4FE1\u9A8C\u8BC1\u7801");return}binding(e).then(t=>{window.location.href=window.location.origin}).catch(t=>{t.msg&&l.fail(t.msg)})}return(t,o)=>{const r=p("van-field"),u=p("van-button"),b=p("van-col");return y(),x("div",k,[V("div",N,[a(r,{modelValue:n(e).phone,"onUpdate:modelValue":o[0]||(o[0]=c=>n(e).phone=c),type:"tel",label:"\u624B\u673A\u53F7",placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7"},null,8,["modelValue"]),a(r,{maxlength:"4",modelValue:n(e).phoneCode,"onUpdate:modelValue":o[1]||(o[1]=c=>n(e).phoneCode=c),onChange:m,center:"",clearable:"",label:"\u77ED\u4FE1\u9A8C\u8BC1\u7801",placeholder:"\u8BF7\u8F93\u5165\u77ED\u4FE1\u9A8C\u8BC1\u7801"},{button:i(()=>[a(u,{size:"small",type:"primary",onClick:h,round:"",disabled:n(s)},{default:i(()=>[f(w(n(d)),1)]),_:1},8,["disabled"])]),_:1},8,["modelValue"]),a(b,{style:{"margin-top":"20px"},offset:"1",span:22},{default:i(()=>[a(u,{onClick:v,class:"button",style:{width:"100%"},round:"",type:"primary",size:"normal"},{default:i(()=>[B]),_:1})]),_:1})])])}}};var U=I(T,[["__scopeId","data-v-77c116b4"]]);export{U as default};
